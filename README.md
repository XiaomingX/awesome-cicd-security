# awesome-cicd-security（优秀的 CI/CD 安全资源）
本项目汇集了**当前主流且实用**的CI/CD（持续集成/持续交付）安全相关资源，涵盖书籍、权威指南、深度博客、实战视频、工具集、演练靶场和真实案例，帮开发者、运维及安全团队快速掌握“安全左移”思路，搭建更稳固的CI/CD环境。


## 书籍：夯实理论与实践基础
- 《高级基础设施渗透测试》—— 聚焦基础设施层的安全测试技术，其中“CI/CD管道渗透与防御”章节可直接落地：从源码仓库劫持到构建服务器漏洞利用，再到防护方案设计，适合想补全“攻防视角”的技术人员。


## 指南：权威框架与落地路径
### 1. 官方权威指南
- [保护 CI/CD 环境的权威指南（CISA & NSA，2023）](https://media.defense.gov/2023/Jun/28/2003249466/-1/-1/0/CSI_DEFENDING_CI_CD_ENVIRONMENTS.PDF)  
  **核心价值**：美国国土安全部（CISA）与国家安全局（NSA）联合发布，给出了CI/CD环境的**威胁模型图谱**（如供应链劫持、凭证窃取等8大类威胁）和可直接复用的防御 checklist（如流水线权限隔离、构建环境硬化），至今仍是行业标杆。

### 2. 落地级最佳实践
- **DevSecOps 全流程嵌入**：将安全检查“左移”到开发早期（代码提交时）、“右延”到部署后（运行时监控），比如：代码提交触发SAST（静态应用安全测试），镜像构建触发SCA（软件成分分析），部署前触发DAST（动态应用安全测试）。
- **遵循核心安全标准**：
  - 采用 **NIST SP 800-204D**：重点关注“配置完整性校验”（比如用工具比对IaC模板与实际部署的差异）和“全链路可追溯”（每步操作关联账号、时间、变更内容）。
  - 覆盖 **OWASP CI/CD Top 10**：针对“凭证泄露”用秘密扫描工具拦截，针对“权限滥用”设置最小权限账号，针对“恶意代码执行”隔离构建环境。
- **秘密管理强化**：遵循“最小权限+自动轮换”原则，用HashiCorp Vault存储数据库密码、API密钥，用AWS Secrets Manager自动轮换云服务凭证，避免硬编码到代码或配置文件。
- **动态威胁建模**：每季度结合新业务（如新增微服务、接入新云厂商）更新威胁模型，比如新增K8s部署环节后，重点评估“容器镜像篡改”“ServiceAccount权限过度”等风险。


## 博客精选：场景化技术解析
### 1. 通用趋势与核心技术
- [2024-2025 CI/CD 管道安全趋势](https://www.linkedin.com/pulse/top-7-cicd-pipeline-trends-2025-kairos-technologies-inc-fcuuc)  
  **核心价值**：拆解3个关键趋势的落地方法：① AI驱动的异常检测（比如用模型识别“非工作时间的构建请求”）；② SLSA供应链安全框架适配（从Level 1“可追溯”到Level 3“防篡改”的升级路径）；③ 混合云环境下的流水线安全协同（多云凭证统一管理、跨平台漏洞同步）。

- [CI/CD 威胁建模实战指南](https://spacelift.io/blog/ci-cd-security)  
  **核心价值**：用“数据流图”方法拆解CI/CD流程（源码→构建→测试→部署），逐个节点标记风险（如源码仓库“分支保护缺失”、构建环节“镜像未签名”），并给出对应工具（如GitLab分支保护规则、Cosign镜像签名）。

### 2. 主流平台安全专题
#### GitHub Actions 安全
- [GitHub Actions 常见攻击与防御](https://securitylab.github.com/research/github-actions-preventing-pwn-requests/)  
  **核心价值**：解析“恶意PR触发危险Action”“工作流权限过度”等攻击场景，附防御配置示例（如设置`permissions: contents: read`限制权限）。
- [GitHub 密钥泄露自动拦截](https://github.blog/2023-09-06-how-github-advanced-security-helps-prevent-secret-leaks/)  
  **核心价值**：介绍GitHub Advanced Security的“秘密扫描”功能，如何自定义规则（比如公司内部API密钥格式），以及泄露后的自动响应（暂停流水线、通知安全团队）。

#### GitLab 安全
- [GitLab Runner 滥用案例与防护](https://frichetten.com/blog/abusing-gitlab-runners/)  
  **核心价值**：曝光“自管理Runner权限过高导致主机被入侵”案例，给出加固方案（如用Docker隔离Runner、限制Runner挂载目录）。
- [GitLab 流水线安全配置清单](https://docs.gitlab.com/ee/user/application_security/ci_cd_security.html)  
  **核心价值**：官方整理的可直接复用清单（如启用“流水线安全仪表盘”、配置依赖扫描规则）。

#### Jenkins 安全
- [Jenkins 2024 安全加固指南](https://www.jenkins.io/doc/book/security/)  
  **核心价值**：针对Jenkins“插件漏洞高发”问题，给出插件筛选标准（官方认证、近6个月有更新），以及“禁用匿名访问”“开启审计日志”等基础配置。

#### ArgoCD 安全
- [ArgoCD 高危漏洞复盘与防御](https://blog.calif.io/p/argo-cd-security-2024)  
  **核心价值**：解析2024年曝光的“ArgoCD 未授权访问”漏洞，附漏洞检测命令和修复补丁，以及长期防护方案（启用SSO认证、限制API访问IP）。


## 视频推荐：可视化实战教学
- [CI/CD 管道攻击实战演示](https://www.youtube.com/watch?v=AQCvfzwcGso)  
  **核心价值**：手把手演示“利用泄露的GitHub Token劫持流水线”“篡改构建脚本植入恶意代码”的完整流程，适合理解攻击链路。
- [DevSecOps 流水线搭建全教程](https://www.youtube.com/watch?v=mpUDqo7tIk8)  
  **核心价值**：从0搭建“GitLab + Jenkins + Trivy + Vault”的安全流水线，涵盖SAST/SCA扫描、镜像签名、秘密注入等关键步骤，附代码和配置文件。


## 工具集：按场景分类选型
| 工具类别         | 工具名称               | 核心功能                                                                 | 适用场景                     |
|------------------|------------------------|--------------------------------------------------------------------------|------------------------------|
| 秘密管理         | HashiCorp Vault        | 集中存储加密凭证、自动轮换、基于角色的权限控制                           | 多环境凭证统一管理           |
|                  | GitGuardian            | 实时扫描代码/配置中的密钥、API密钥，支持GitHub/GitLab等平台集成          | 防止凭证硬编码泄露           |
| 漏洞扫描         | Trivy                  | 扫描容器镜像、IaC模板（Terraform/Ansible）、依赖包中的漏洞               | 构建/部署前的自动化检测       |
|                  | Semgrep                | 静态代码扫描（SAST），支持自定义规则（如检测危险的命令执行代码）         | 代码提交阶段的安全检查       |
| 供应链安全       | Cosign                 | 容器镜像签名与验证，防止镜像被篡改                                       | 构建环节的镜像完整性保障     |
|                  | SLSA Provenance Builder| 生成流水线“溯源信息”（谁构建、用了哪些依赖），适配SLSA标准               | 供应链合规审计               |
| 威胁检测与分析   | Sysdig                 | 云原生环境下的实时威胁检测（如异常构建行为）、漏洞管理、日志分析         | 混合云/容器化CI/CD环境       |
| 安全评估         | Gato                   | 扫描GitHub组织的安全弱点（如分支保护缺失、Action权限过高）               | GitHub环境安全审计           |
|                  | CI/CD 威胁矩阵         | 系统化展示8大类32种威胁（如源码劫持、构建污染），附防御方案               | 风险评估与防护体系设计       |


## 练习场：实战攻防演练
- [CI/CD Goat](https://github.com/cider-security-research/cicd-goat)  
  **核心价值**：模拟真实CI/CD环境（含GitHub Actions、Jenkins、ArgoCD），内置10+常见漏洞（如凭证泄露、权限滥用、镜像篡改），可手动利用漏洞并验证防御效果，适合团队内攻防演练。
- [OWASP CI/CD Security Lab](https://owasp.org/www-project-ci-cd-security-lab/)  
  **核心价值**：OWASP官方靶场，侧重“供应链攻击”场景（如恶意依赖注入、构建服务器入侵），附详细的演练手册和修复教程。


## 案例分析：从真实事件学教训
### 1. 供应链攻击案例：SolarWinds 攻击中的CI/CD滥用
- **事件回顾**：攻击者入侵SolarWinds的CI/CD流水线，在软件更新包中植入恶意代码，导致18000+客户受影响。
- **核心教训**：① 未对构建环境进行隔离，导致攻击者可篡改构建脚本；② 缺乏镜像签名与验证，恶意包顺利分发；③ 流水线日志审计不足，攻击长期未被发现。
- **防御参考**：启用SLSA Level 3（防篡改）、隔离构建环境、对所有发布包进行签名验证。

### 2. 凭证泄露案例：某电商平台CI/CD劫持事件
- **事件回顾**：开发人员误将阿里云AccessKey硬编码到GitHub仓库，攻击者扫描到后，利用密钥接入CI/CD流水线，篡改商品价格计算逻辑。
- **核心教训**：① 缺乏秘密扫描机制；② 密钥权限未遵循最小原则（可访问流水线+生产数据库）；③ 无密钥泄露后的应急响应流程。
- **防御参考**：接入GitGuardian实时扫描、用Vault管理密钥并限制权限、制定“密钥泄露应急手册”（暂停流水线→轮换密钥→排查影响）。


## 前沿洞察：CI/CD 安全发展方向
1.  **AI 深度赋能安全自动化**：从“被动扫描”到“主动预测”，比如用AI模型识别“异常的构建依赖变更”（可能是恶意依赖注入），或自动生成修复建议（如IaC配置错误的修正代码）。
2.  **供应链安全成必选项**：SLSA、Sigstore等标准快速普及，企业从“关注自身流水线”转向“全供应链防护”（含上游依赖、第三方构建工具）。
3.  **无服务器与容器安全融合**：针对无服务器CI/CD（如AWS CodePipeline）的“函数权限过度”“日志不完整”等问题，出现专用安全工具（如AWS CodeGuru Security）。
4.  **合规审计自动化**：流水线可自动生成符合NIST、ISO 27001、DORA等标准的审计报告，减少人工整理成本，同时支持实时合规检查（如部署前验证是否符合数据加密要求）。
